<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <title>Biblioteca - Autores</title>
    <head th:replace="~{/fragments/head :: head}"></head>
</head>
<body>
<nav th:replace="~{/fragments/navbar :: nav}"></nav>

<!-- Created by Lucas Aramberry -->
<div class="filtrar bg-dark text-white">
    <div><h5>Buscar libro por Autor</h5></div>
    <div>
        <form action="/author" method="GET" enctype="multipart/form-data">
            <select class="filtrar-select" name="idAuthor">
                <option selected disabled>Seleccionar</option>
                <option>Todos</option>
                <option th:each="author : ${authorsActive}" th:value="${author.id}" th:text="${author.name}"></option>
            </select>
            <div class="filtrar-boton">
                <button type="submit" class="btn btn-warning">Buscar</button>
            </div>
        </form>
    </div>
</div>

<div sec:authorize="hasRole('ADMIN')" class="form-group2 centrar-boton text-center">
    <a href="/author/register" class="btn btn-dark" tabindex="-1" role="button">Agregar autor</a>
</div>

<div class="contenedor">

    <div class="contenedorHijo" th:each="author : ${authors}">

        <div class="card">

            <div class="col-md-4 imagen-card">
                <img th:src="@{'/photo/author/' + ${author.id}}" class="rounded-start" alt="Autor">
            </div>

            <div class="col-md-8 card-body">

                <h5 class="card-title" th:text="${author.name}"></h5><br>

                <ul sec:authorize="hasRole('ADMIN')">
                    <li th:text="'ALTA: ' + ${author.register}"></li>
                    <li th:text="'BAJA: ' + ${author.unsubscribe}"></li>
                </ul>

                <div sec:authorize="hasRole('ADMIN')" class="botones">

                    <a th:if="${author.unsubscribe != null}" th:href="@{'/author/high/' + ${author.id}}">
                        <button type="button" class="btn btn-success btn-sm">Dar alta</button>
                    </a>

                    <a th:unless="${author.unsubscribe != null}"
                       th:href="@{'/author/low/' + ${author.id}}">
                        <button type="button" class="btn btn-danger btn-sm">Dar baja</button>
                    </a>

                    <a th:href="@{'/author/update/' + ${author.id}}">
                        <button type="button" class="btn btn-warning btn-sm">Modificar</button>
                    </a>

                    <a th:href="@{'/author/delete/' + ${author.id}}">
                        <button type="button" class="btn btn-danger btn-sm">Eliminar</button>
                    </a>
                    <!--<a sec:authorize="hasRole('ADMIN')" th:if="${author.unsubscribe != null}" th:href="@{/author/high(id=__${author.id}__)}" title="Alta"><i class="fa fa-arrow-up text-success"></i></a>-->
                    <!--<a sec:authorize="hasRole('ADMIN')" th:unless="${author.unsubscribe != null}" th:href="@{/author/low(id=__${author.id}__)}" title="Baja"><i class="fa fa-ban text-danger"></i></a>-->
                    <!--<a sec:authorize="hasRole('ADMIN')" th:href="@{/author/update-author(id=__${author.id}__)}" title="Modificar"><i class="fas fa-feather-alt text-warning"></i></a>-->
                    <!--<a sec:authorize="hasRole('ADMIN')" th:href="@{/author/delete(id=__${author.id}__)}" title="Eliminar"><i class="fas fa-archive text-danger"></i></a>-->
                </div>
            </div>
        </div>
    </div>
</div>

<div th:if="${books}" class="contenedor">

    <div class="contenedorHijo" th:each="book : ${books}">

        <div class="card mb-3 bg-dark text-white">

            <div class="row g-0">

                <div class="col-md-4 imagen-card">
                    <img th:src="@{'/photo/book/' + ${book.id}}" class="img-fluid rounded-start" alt="Portada">
                </div>

                <div class="col-md-8">
                    <div class="card-body">

                        <h5 class="card-title" th:text="${book.title}"></h5>
                        <br>

                        <ul>
                            <li th:text="'ISBN: ' + ${book.isbn}"></li>
                            <li th:text="'AUTOR: ' + ${book.author.name}"></li>
                            <li th:text="'EDITORIAL: ' + ${book.publisher.name}"></li>
                            <li th:text="'EJEMPLARES DISPONIBLES: ' + ${book.amountCopiesRemaining}"></li>
                        </ul>

                        <div class="form-group2 text-center">

                            <a class="btn btn-warning" th:href="@{'/books/view/' + ${book.id}}" role="button">Ver
                                m√°s</a>

                            <a sec:authorize="hasRole('ADMIN')" th:if="${book.unsubscribe != null}"
                               th:href="@{'/book/high/' + ${book.id}}" title="Alta">
                                <i class="fa fa-arrow-up text-success"></i>
                            </a>

                            <a sec:authorize="hasRole('ADMIN')" th:unless="${book.unsubscribe != null}"
                               th:href="@{'/book/low/' + ${book.id}}" title="Baja"><i
                                    class="fa fa-ban text-danger"></i></a>

                            <a sec:authorize="hasRole('ADMIN')" th:href="@{'/book/update/'+ ${book.id}}"
                               title="Modificar"><i class="fas fa-feather-alt text-warning"></i></a>
                            <!--<a sec:authorize="hasRole('ADMIN')" th:href="@{/libros/delete(id=__${book.id}__)}" title="Eliminar"><i class="fas fa-archive text-danger"></i></a>-->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<footer th:replace="~{/fragments/footer :: footer}"></footer>

<script th:replace="~{/fragments/script :: script}"></script>
</body>
</html>